(function(){var t={800:function(t,e,s){"use strict";var i=s(5130),o=s(6768);const n={id:"app"},r={class:"main-nav"};function a(t,e,s,i,a,c){const l=(0,o.g2)("router-link"),u=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.CE)("div",n,[(0,o.Lk)("nav",r,[(0,o.bF)(l,{to:"/dashboard",class:"nav-link"},{default:(0,o.k6)((()=>e[1]||(e[1]=[(0,o.eW)(" Dashboard ")]))),_:1}),(0,o.bF)(l,{to:"/subscriptions",class:"nav-link"},{default:(0,o.k6)((()=>e[2]||(e[2]=[(0,o.eW)(" Manage Subscriptions ")]))),_:1}),t.currentUser?((0,o.uX)(),(0,o.CE)("button",{key:0,class:"secondary logout-button",onClick:e[0]||(e[0]=(...e)=>t.logOut&&t.logOut(...e))}," Log Out ")):(0,o.Q3)("",!0)]),(0,o.Lk)("main",null,[(0,o.bF)(u)])])}var c=s(9928);const l={region:"us-east-1",userPoolId:"us-east-1_3kx6lCO0y",clientId:"2lbft59mefrqc7vv4mn3efhnch"},u=Object.freeze({streaming:"Streaming",software:"Software",gaming:"Gaming",creators:"Creators (Patreon, Substack, etc.)",puzzles:"Puzzles/Crosswords",news:"News and Magazines",food:"Food and Drink",other:"Other"}),d=["#FF6B6B","#4ECDC4","#FFD166","#ff0000","#1A936F","#3D5A80","#F26419","#8338EC","#06D6A0","#EF476F"],p=new c.NE({UserPoolId:l.userPoolId,ClientId:l.clientId}),b=(t,e)=>{const s=new c.By({Username:t,Password:e}),i={Username:t,Pool:p},o=new c.TU(i);return new Promise(((t,e)=>{o.authenticateUser(s,{onSuccess:e=>{t(e)},onFailure:t=>{e(t)},newPasswordRequired:(e,s)=>{t({challenge:"NEW_PASSWORD_REQUIRED",cognitoUser:o})}})}))},h=()=>p.getCurrentUser(),g=()=>{const t=h();t&&t.signOut()},v=()=>{const t=h();return t?new Promise(((e,s)=>{t.getSession(((i,o)=>i?s(i):null===o?s(new Error("Session is null")):o.isValid()?e(o):void t.refreshSession(o.getRefreshToken(),((t,i)=>{if(t)return s(t);e(i)}))))})):Promise.reject(new Error("No current user"))};var m=(0,o.pM)({name:"App",setup(){const t=h(),e=()=>{g(),window.location.reload()};return{currentUser:t,logOut:e}}}),y=s(1241);const f=(0,y.A)(m,[["render",a]]);var w=f,k=s(657),C=(s(8992),s(7550),s(1387));function S(t,e,s,i,n,r){const a=(0,o.g2)("LoginForm"),c=(0,o.g2)("UpdatePasswordForm");return(0,o.uX)(),(0,o.CE)("div",null,[t.challengedUser?((0,o.uX)(),(0,o.Wv)(c,{key:1,challengedUser:t.challengedUser},null,8,["challengedUser"])):((0,o.uX)(),(0,o.Wv)(a,{key:0,onNewPasswordRequired:t.handleNewPasswordRequired},null,8,["onNewPasswordRequired"]))])}var L=s(144);const F={class:"login-form"};function E(t,e,s,n,r,a){return(0,o.uX)(),(0,o.CE)("div",F,[(0,o.Lk)("form",{onSubmit:e[2]||(e[2]=(0,i.D$)(((...e)=>t.handleLogIn&&t.handleLogIn(...e)),["prevent"]))},[e[3]||(e[3]=(0,o.Lk)("h2",null,"Log In",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.username=e),placeholder:"Username",class:"input-field"},null,512),[[i.Jo,t.username]]),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":e[1]||(e[1]=e=>t.password=e),type:"password",placeholder:"Password",class:"input-field"},null,512),[[i.Jo,t.password]]),e[4]||(e[4]=(0,o.Lk)("div",{class:"button-container"},[(0,o.Lk)("button",{type:"submit",class:"submit-button"},"Log In")],-1))],32)])}s(4114);var R=s(4084);const A={position:"top-right",autoClose:5e3,closeButton:!0,pauseOnHover:!0};function D(t){(0,R.oR)(t,A)}var P=(0,o.pM)({name:"LogIn",data(){return{username:"",password:""}},setup(){const t=(0,C.rd)(),e=h();return e&&t.push({name:"Dashboard"}),{router:t}},methods:{async handleLogIn(){try{const t=await b(this.username,this.password);"NEW_PASSWORD_REQUIRED"===t.challenge?(D("New password required"),this.$emit("new-password-required",t.cognitoUser)):window.location.reload()}catch(t){D("Sorry, there was an error while logging in."),console.error("Login error:",t)}}}});const x=(0,y.A)(P,[["render",E],["__scopeId","data-v-3ab360f6"]]);var U=x;const I={class:"update-password-form"};function _(t,e,s,n,r,a){return(0,o.uX)(),(0,o.CE)("div",I,[(0,o.Lk)("form",{onSubmit:e[2]||(e[2]=(0,i.D$)(((...e)=>t.handleUpdatePassword&&t.handleUpdatePassword(...e)),["prevent"]))},[e[3]||(e[3]=(0,o.Lk)("h2",null,"Update Password",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.currentPassword=e),type:"password",placeholder:"Current Password",class:"input-field"},null,512),[[i.Jo,t.currentPassword]]),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":e[1]||(e[1]=e=>t.newPassword=e),type:"password",placeholder:"New Password",class:"input-field"},null,512),[[i.Jo,t.newPassword]]),e[4]||(e[4]=(0,o.Lk)("div",{class:"button-container"},[(0,o.Lk)("button",{type:"submit",class:"submit-button"},"Update Password")],-1))],32)])}var N=(0,o.pM)({name:"UpdatePassword",props:{challengedUser:{type:Object,required:!1}},data(){return{currentPassword:"",newPassword:""}},setup(){const t=(0,C.rd)();return{router:t}},methods:{async handleUpdatePassword(){if(this.challengedUser)return void this.challengedUser.completeNewPasswordChallenge(this.newPassword,{},{onSuccess:()=>{D("Password updated successfully"),this.router.push({name:"Dashboard"})},onFailure:t=>{D("Sorry, there was an error updating your password."),console.error("Password update error:",t)}});const t=h();t?t.changePassword(this.currentPassword,this.newPassword,((t,e)=>{t?console.log("Error updating password:",t):console.log("Password updated successfully:",e)})):D("Sorry, you must be logged in to update your password.")}}});const O=(0,y.A)(N,[["render",_],["__scopeId","data-v-6b3b1871"]]);var X=O,B=(0,o.pM)({name:"AuthForm",components:{LoginForm:U,UpdatePasswordForm:X},setup(){const t=(0,L.KR)(null),e=e=>{t.value=e};return{challengedUser:t,handleNewPasswordRequired:e}}});const V=(0,y.A)(B,[["render",S]]);var $=V,q=s(4232);const j={class:"dashboard"},T={key:0,class:"spinner-container"},M={key:1},J={class:"metrics-grid"},W={class:"metric-card"},z={class:"metric-value"},K={class:"metric-card"},Q={class:"metric-value"},H={class:"metric-card"},Y={class:"metric-value"},Z={class:"metric-card"},G={class:"metric-value"},tt={class:"dashboard-section"},et={class:"renewals-list"},st={key:0,class:"empty-state"},it={class:"renewal-service"},ot={class:"renewal-date"},nt={class:"renewal-cost"},rt={class:"charts-grid"},at={class:"dashboard-section"},ct={class:"chart-container"},lt={class:"dashboard-section"},ut={class:"chart-container"};function dt(t,e,s,i,n,r){const a=(0,o.g2)("PieChart"),c=(0,o.g2)("ScatterPlot");return(0,o.uX)(),(0,o.CE)("div",j,[n.loading?((0,o.uX)(),(0,o.CE)("div",T,e[0]||(e[0]=[(0,o.Lk)("div",{class:"spinner"},null,-1),(0,o.Lk)("p",null,"Loading subscriptions...",-1)]))):((0,o.uX)(),(0,o.CE)("div",M,[(0,o.Lk)("div",J,[(0,o.Lk)("div",W,[e[1]||(e[1]=(0,o.Lk)("h3",null,"Total Monthly Cost",-1)),(0,o.Lk)("div",z," $"+(0,q.v_)(r.formatCurrency(r.totalMonthlyCost)),1)]),(0,o.Lk)("div",K,[e[2]||(e[2]=(0,o.Lk)("h3",null,"Total Annual Cost",-1)),(0,o.Lk)("div",Q,"$"+(0,q.v_)(r.formatCurrency(r.totalAnnualCost)),1)]),(0,o.Lk)("div",H,[e[3]||(e[3]=(0,o.Lk)("h3",null,"Active Subscriptions",-1)),(0,o.Lk)("div",Y,(0,q.v_)(r.subscriptions.length),1)]),(0,o.Lk)("div",Z,[e[4]||(e[4]=(0,o.Lk)("h3",null,"Average Value Rating",-1)),(0,o.Lk)("div",G,(0,q.v_)(r.averageValueRating.toFixed(1))+"/5",1)])]),(0,o.Lk)("div",tt,[e[5]||(e[5]=(0,o.Lk)("h3",null,"Upcoming Renewals",-1)),(0,o.Lk)("div",et,[0===r.upcomingRenewals.length?((0,o.uX)(),(0,o.CE)("div",st," None ")):((0,o.uX)(!0),(0,o.CE)(o.FK,{key:1},(0,o.pI)(r.upcomingRenewals,(t=>((0,o.uX)(),(0,o.CE)("div",{key:t.id,class:"renewal-item"},[(0,o.Lk)("div",it,(0,q.v_)(t.serviceName),1),(0,o.Lk)("div",ot,(0,q.v_)(r.formatDate(t.nextRenewal)),1),(0,o.Lk)("div",nt," $"+(0,q.v_)(parseFloat(t.cost).toFixed(2)),1)])))),128))])]),(0,o.Lk)("div",rt,[(0,o.Lk)("div",at,[e[6]||(e[6]=(0,o.Lk)("h3",null,"Cost Distribution by Category",-1)),(0,o.Lk)("div",ct,[(0,o.bF)(a,{data:r.pieChartData,options:r.pieChartOptions},null,8,["data","options"])])]),(0,o.Lk)("div",lt,[e[7]||(e[7]=(0,o.Lk)("h3",null,"Value vs Cost Analysis",-1)),(0,o.Lk)("div",ut,[(0,o.bF)(c,{data:r.scatterChartData,options:r.scatterChartOptions},null,8,["data","options"])])])])]))])}s(4520),s(2577),s(1454),s(8872);var pt=s(1010),bt=s(5524),ht=s(1114);class gt{constructor(t,e,s,i,o,n,r,a="",c="active"){(0,ht.A)(this,"subscriptionId",void 0),(0,ht.A)(this,"serviceName",void 0),(0,ht.A)(this,"category",void 0),(0,ht.A)(this,"cost",void 0),(0,ht.A)(this,"billingCycle",void 0),(0,ht.A)(this,"nextRenewal",void 0),(0,ht.A)(this,"valueRating",void 0),(0,ht.A)(this,"notes",void 0),(0,ht.A)(this,"status",void 0),this.subscriptionId=t,this.serviceName=e,this.category=s,this.cost=i,this.billingCycle=o,this.nextRenewal=n,this.valueRating=r,this.notes=a,this.status=c}static buildFromFormData(t){return new gt(t.subscriptionId,t.serviceName,t.category,Number(t.cost),t.billingCycle,t.nextRenewal instanceof Date?t.nextRenewal:new Date(t.nextRenewal),Number(t.valueRating),t.notes||"",t.active?"active":"inactive")}isActive(){return"active"===this.status}isValid(){const t=Object.keys(u);return!!t.includes(this.category)&&("active"===this.status&&this.nextRenewal<=new Date?(console.error("Next renewal date must be in the future for active subscriptions."),!1):"string"===typeof this.subscriptionId&&this.cost>0&&this.valueRating>=1&&this.valueRating<=5)}}var vt=s(4373);const mt=vt.A.create({baseURL:"https://il5tv29m1d.execute-api.us-east-1.amazonaws.com/prod",headers:{"Content-Type":"application/json"}});mt.interceptors.request.use((async t=>{const e=h();return e&&e.getSession(((e,s)=>{if(e)return void console.error("Error getting session:",e);const i=s.getIdToken().getJwtToken();i&&(t.headers.Authorization=`Bearer ${i}`)})),t}),(t=>Promise.reject(t)));var yt=mt;async function ft(){const t=await yt.get("/subscriptions");return t.data.map((t=>new gt(t.subscriptionId,t.serviceName,t.category,t.cost,t.billingCycle,t.nextRenewal,t.valueRating,t.notes||"",t.status||"active")))}let wt=!1,kt=null;async function Ct(){return wt||(wt=!0,kt=v().catch((t=>{throw console.error("Failed to refresh session:",t),t})).finally((()=>{wt=!1,kt=null}))),kt}const St=(0,k.nY)("subscriptions",{state:()=>({subscriptions:[],loading:!1,error:null,selectedCategory:null}),getters:{sortedSubscriptions:t=>(e,s=!0)=>[...t.subscriptions].sort(((t,i)=>{let o=t[e],n=i[e];return(o instanceof Date||n instanceof Date)&&(o=new Date(o).getTime(),n=new Date(n).getTime()),"number"===typeof o&&"number"===typeof n?s?o-n:n-o:"string"===typeof o&&"string"===typeof n?s?o.localeCompare(n):n.localeCompare(o):0})),subscriptionsByCategory:t=>e=>t.subscriptions.filter((t=>t.category===e))},actions:{async fetchSubscriptions(){this.loading=!0;try{await Ct();const t=await ft();this.subscriptions=t}catch(t){throw this.error="Failed to fetch subscriptions: "+t,t}finally{this.loading=!1}},async addSubscription(t){this.loading=!0;try{await Ct();const e=await yt.post("/subscriptions",t);this.subscriptions.push(new gt(e.data.subscriptionId,e.data.serviceName,e.data.category,e.data.cost,e.data.billingCycle,new Date(e.data.nextRenewal),e.data.valueRating,e.data.notes||"",e.data.status||"active"))}catch(e){this.error="Failed to add subscription: "+e}finally{this.loading=!1}},async updateSubscription(t){this.loading=!0;try{await Ct();const{subscriptionId:e,...s}=t;await yt.put(`/subscriptions/${e}`,s);const i=this.subscriptions.findIndex((t=>t.subscriptionId===e));-1!==i&&(this.subscriptions[i]=t)}catch(e){throw this.error="Failed to update subscription: "+e,e}finally{this.loading=!1}},async removeSubscription(t){this.loading=!0;try{await Ct(),await yt.delete(`/subscriptions/${t}`),this.subscriptions=this.subscriptions.filter((e=>e.subscriptionId!==t))}catch(e){throw this.error="Failed to remove subscription: "+e,e}finally{this.loading=!1}},getSubscriptionById(t){return this.subscriptions.find((e=>e.subscriptionId===t))},setCategoryFilter(t){this.selectedCategory=t}}});function Lt(t){return t.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")}bt.t1.register(bt.hE,bt.m_,bt.s$,bt.Bs,bt.kc,bt.FN);var Ft={name:"DashboardView",components:{PieChart:pt.Fq,ScatterPlot:pt.Xl},data(){return{loading:!1}},computed:{formatCurrency(){return Lt},subscriptionStore(){return St()},subscriptions(){return this.subscriptionStore.subscriptions},totalMonthlyCost(){return this.subscriptions.reduce(((t,e)=>{const s=parseFloat(e.cost);return t+("annual"===e.billingCycle?s/12:s)}),0)},totalAnnualCost(){return this.subscriptions.reduce(((t,e)=>{const s=parseFloat(e.cost);return t+("annual"===e.billingCycle?s:12*s)}),0)},averageValueRating(){if(0===this.subscriptions.length)return 0;const t=this.subscriptions.reduce(((t,e)=>t+e.valueRating),0);return t/this.subscriptions.length},upcomingRenewals(){const t=new Date,e=new Date(t.getTime()+2592e6);return this.subscriptionStore.sortedSubscriptions("nextRenewal",!0).filter((s=>{const i=new Date(s.nextRenewal);return i>=t&&i<=e})).slice(0,5)},costByCategory(){const t=this.subscriptions.reduce(((t,e)=>{const s="annual"===e.billingCycle?e.cost/12:e.cost;return t[e.category]=(t[e.category]||0)+s,t}),{}),e=Object.keys(u);return e.filter((e=>t[e]>0)).map((e=>({name:u[e],value:parseFloat(t[e].toFixed(2))})))},pieChartData(){return{labels:this.costByCategory.map((t=>t.name)),datasets:[{data:this.costByCategory.map((t=>t.value)),backgroundColor:d}]}},pieChartOptions(){return{responsive:!0,onClick:(t,e)=>{if(e.length>0){const t=e[0],s=t.index,i=this.costByCategory[s];this.handlePieSliceClick(i.name)}},onHover:(t,e)=>{t.native.target.style.cursor=e.length>0?"pointer":"default"},plugins:{legend:{position:"right"},tooltip:{callbacks:{label:t=>{const e=t.raw;return"$"+e.toFixed(2)}}}}}},scatterChartData(){const t=Object.keys(u),e=this.subscriptions.map((e=>{const s=t.indexOf(e.category),i=d[s%d.length];return{serviceName:e.serviceName,category:e.category,x:"annual"===e.billingCycle?parseFloat((e.cost/12).toFixed(2)):parseFloat(e.cost),y:e.valueRating,backgroundColor:i,borderColor:i}}));return{datasets:[{label:"Value vs. Cost",data:e,backgroundColor:e.map((t=>t.backgroundColor)),borderColor:e.map((t=>t.borderColor)),borderWidth:1}]}},scatterChartOptions(){return{responsive:!0,scales:{x:{title:{display:!0,text:"Monthly Cost ($)"}},y:{title:{display:!0,text:"Value Rating"},min:0,max:6}},plugins:{legend:{display:!1},tooltip:{callbacks:{label:t=>{const{x:e,y:s,serviceName:i,category:o}=t.raw,n=u[o];return`${i} (${n}): Cost: $${e.toFixed(2)}, Value: ${s}`}}}}}}},methods:{formatDate(t){return new Date(t).toLocaleDateString()},async fetchSubscriptions(){this.loading=!0;try{await this.subscriptionStore.fetchSubscriptions()}catch(t){console.error("Error fetching subscriptions:",t),D("Failed to fetch subscriptions. Please try again later.")}finally{this.loading=!1}},handlePieSliceClick(t){const e=Object.keys(u).find((e=>u[e]===t));e&&(this.subscriptionStore.setCategoryFilter(e),this.$router.push("/subscriptions"))}},mounted(){this.fetchSubscriptions()},beforeUnmount(){window.removeEventListener("storage",this.loadSubscriptions)}};const Et=(0,y.A)(Ft,[["render",dt],["__scopeId","data-v-1a5bc70a"]]);var Rt=Et;const At={id:"subscription-manager"};function Dt(t,e,s,i,n,r){const a=(0,o.g2)("subscription-form"),c=(0,o.g2)("subscription-list");return(0,o.uX)(),(0,o.CE)("div",At,[(0,o.Lk)("header",null,[e[1]||(e[1]=(0,o.Lk)("h2",null,"Manage Subscriptions",-1)),n.showForm?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:e[0]||(e[0]=(...t)=>r.handleAddSubscriptionClick&&r.handleAddSubscriptionClick(...t))}," Add Subscription "))]),n.showForm?((0,o.uX)(),(0,o.Wv)(a,{key:0,subscription:n.editingSubscription,onSubscriptionSubmit:r.handleSubscriptionSubmit,onCancel:r.handleCancel,ref:"subscriptionForm"},null,8,["subscription","onSubscriptionSubmit","onCancel"])):((0,o.uX)(),(0,o.Wv)(c,{key:1,onEdit:r.handleEdit},null,8,["onEdit"]))])}const Pt={class:"subscription-list active"},xt={class:"list-header"},Ut={class:"sort-control"},It={class:"sort-wrapper"},_t=["title"],Nt={class:"category-filters"},Ot={class:"category-chips"},Xt=["onClick"],Bt={key:0,class:"loading-state"},Vt={key:1},$t={key:0,class:"empty-state"},qt={key:1,class:"subscription-grid"},jt={class:"subscription-list inactive"},Tt={key:0,class:"loading-state"},Mt={key:1},Jt={key:0,class:"empty-state"},Wt={key:1};function zt(t,e,s,n,r,a){const c=(0,o.g2)("subscription-details");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.Lk)("div",Pt,[(0,o.Lk)("div",xt,[e[4]||(e[4]=(0,o.Lk)("h2",null,"Active Subscriptions",-1)),(0,o.Lk)("div",Ut,[e[3]||(e[3]=(0,o.Lk)("label",{for:"sortBy"},"Sort by:",-1)),(0,o.Lk)("div",It,[(0,o.bo)((0,o.Lk)("select",{id:"sortBy","onUpdate:modelValue":e[0]||(e[0]=t=>r.sortBy=t)},e[2]||(e[2]=[(0,o.Lk)("option",{value:"nextRenewal"},"Next Renewal Date",-1),(0,o.Lk)("option",{value:"cost"},"Cost",-1),(0,o.Lk)("option",{value:"serviceName"},"Name",-1)]),512),[[i.u1,r.sortBy]]),(0,o.Lk)("button",{class:"sort-direction-button",onClick:e[1]||(e[1]=t=>r.sortAscending=!r.sortAscending),title:r.sortAscending?"Sort Ascending":"Sort Descending"},[(0,o.Lk)("span",{class:(0,q.C4)(["arrow",{ascending:r.sortAscending}])}," ↓ ",2)],8,_t)])])]),(0,o.Lk)("div",Nt,[(0,o.Lk)("div",Ot,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.categories,((t,e,s)=>((0,o.uX)(),(0,o.CE)("button",{key:e,class:(0,q.C4)(["category-chip",{selected:a.selectedCategory===e,"non-selected":a.selectedCategory&&a.selectedCategory!==e}]),style:(0,q.Tr)({backgroundColor:a.getCategoryColor(s)}),onClick:e=>a.handleCategoryClick(t)},(0,q.v_)(t),15,Xt)))),128))])]),a.loading?((0,o.uX)(),(0,o.CE)("div",Bt,e[5]||(e[5]=[(0,o.Lk)("div",{class:"spinner"},null,-1),(0,o.Lk)("p",null,"Loading subscriptions...",-1)]))):((0,o.uX)(),(0,o.CE)("div",Vt,[0===a.activeSubscriptions.length?((0,o.uX)(),(0,o.CE)("div",$t," You don't have any active subscriptions. ")):((0,o.uX)(),(0,o.CE)("div",qt,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(a.activeSubscriptions,(t=>((0,o.uX)(),(0,o.Wv)(c,{key:t.subscriptionId,subscription:t,onEdit:a.editSubscription,onDelete:a.deleteSubscription},null,8,["subscription","onEdit","onDelete"])))),128))]))]))]),(0,o.Lk)("div",jt,[e[7]||(e[7]=(0,o.Lk)("h2",null,"Inactive Subscriptions",-1)),a.loading?((0,o.uX)(),(0,o.CE)("div",Tt,e[6]||(e[6]=[(0,o.Lk)("div",{class:"spinner"},null,-1),(0,o.Lk)("p",null,"Loading subscriptions...",-1)]))):((0,o.uX)(),(0,o.CE)("div",Mt,[0===a.inactiveSubscriptions.length?((0,o.uX)(),(0,o.CE)("div",Jt," You don't have any inactive subscriptions. ")):((0,o.uX)(),(0,o.CE)("div",Wt,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(a.inactiveSubscriptions,(t=>((0,o.uX)(),(0,o.Wv)(c,{key:t.subscriptionId,subscription:t,onEdit:a.editSubscription,onDelete:a.deleteSubscription},null,8,["subscription","onEdit","onDelete"])))),128))]))]))])],64)}const Kt={class:"subscription-card"},Qt={class:"subscription-details"},Ht={class:"card-actions"};function Yt(t,e,s,i,n,r){return(0,o.uX)(),(0,o.CE)("div",Kt,[(0,o.Lk)("h3",null,(0,q.v_)(s.subscription.serviceName),1),(0,o.Lk)("div",Qt,[(0,o.Lk)("p",null,"Category: "+(0,q.v_)(n.categories[s.subscription.category]),1),(0,o.Lk)("p",null," Cost: $"+(0,q.v_)(s.subscription.cost.toFixed(2))+" "+(0,q.v_)(s.subscription.billingCycle),1),(0,o.Lk)("p",null,"Next Renewal: "+(0,q.v_)(r.formatDate(s.subscription.nextRenewal)),1),(0,o.Lk)("p",null,"Value Rating: "+(0,q.v_)(s.subscription.valueRating)+"/5",1)]),(0,o.Lk)("div",Ht,[(0,o.Lk)("button",{onClick:e[0]||(e[0]=e=>t.$emit("edit",s.subscription.subscriptionId))},"Edit"),(0,o.Lk)("button",{onClick:e[1]||(e[1]=e=>t.$emit("delete",s.subscription.subscriptionId)),class:"delete-btn"}," Delete ")])])}var Zt={name:"SubscriptionDetails",props:{subscription:{type:Object,required:!0}},data(){return{categories:u}},methods:{formatDate(t){return new Date(t).toLocaleDateString("en-US",{timeZone:"UTC"})}}};const Gt=(0,y.A)(Zt,[["render",Yt],["__scopeId","data-v-482451a9"]]);var te=Gt;const ee="subscription-sort-settings",se={sortBy:"nextRenewal",sortAscending:!0};var ie={name:"SubscriptionList",emits:["edit"],components:{SubscriptionDetails:te},data(){const t=localStorage.getItem(ee),e=t?JSON.parse(t):se;return{categories:u,sortBy:e.sortBy,sortAscending:e.sortAscending}},computed:{subscriptionStore(){return St()},subscriptions(){return this.subscriptionStore.sortedSubscriptions(this.sortBy,this.sortAscending)},activeSubscriptions(){const t=this.subscriptions.filter((t=>t.isActive()));return this.selectedCategory?t.filter((t=>t.category===this.selectedCategory)):t},inactiveSubscriptions(){return this.subscriptions.filter((t=>!t.isActive()))},loading(){return this.subscriptionStore.loading},selectedCategory(){return this.subscriptionStore.selectedCategory}},watch:{sortBy(){this.saveSortSettings()},sortAscending(){this.saveSortSettings()}},methods:{getCategoryColor(t){return d[t%d.length]},async fetchSubscriptions(){try{await this.subscriptionStore.fetchSubscriptions()}catch(t){D("Failed to fetch subscriptions. Please try again later.")}},editSubscription(t){this.$emit("edit",t)},deleteSubscription(t){confirm("Are you sure you want to delete this subscription?")&&this.subscriptionStore.removeSubscription(t)},formatDate(t){return new Date(t).toLocaleDateString("en-US",{timeZone:"UTC"})},saveSortSettings(){const t={sortBy:this.sortBy,sortAscending:this.sortAscending};localStorage.setItem(ee,JSON.stringify(t))},handleCategoryClick(t){const e=Object.keys(this.categories).find((e=>this.categories[e]===t));this.selectedCategory===e?this.subscriptionStore.setCategoryFilter(null):this.subscriptionStore.setCategoryFilter(e)}},mounted(){this.fetchSubscriptions()}};const oe=(0,y.A)(ie,[["render",zt],["__scopeId","data-v-c45d0bc4"]]);var ne=oe;const re={class:"subscription-form"},ae={class:"form-group"},ce={class:"form-group"},le={class:"form-group"},ue=["value"],de={class:"form-group"},pe={class:"form-group"},be={class:"form-group"},he=["disabled"],ge={class:"form-group"},ve={class:"form-group"},me={class:"form-actions"},ye={type:"submit"};function fe(t,e,s,n,r,a){return(0,o.uX)(),(0,o.CE)("div",re,[(0,o.Lk)("h2",null,(0,q.v_)(a.isEditing?"Edit Subscription":"Add New Subscription"),1),(0,o.Lk)("form",{onSubmit:e[10]||(e[10]=(0,i.D$)(((...t)=>a.handleSubmit&&a.handleSubmit(...t)),["prevent"]))},[a.isEditing?(0,o.bo)(((0,o.uX)(),(0,o.CE)("input",{key:0,type:"hidden","onUpdate:modelValue":e[0]||(e[0]=t=>r.form.id=t)},null,512)),[[i.Jo,r.form.id]]):(0,o.Q3)("",!0),(0,o.Lk)("div",ae,[e[11]||(e[11]=(0,o.Lk)("label",{for:"serviceName"},"Service Name",-1)),(0,o.bo)((0,o.Lk)("input",{id:"serviceName","onUpdate:modelValue":e[1]||(e[1]=t=>r.form.serviceName=t),type:"text",required:""},null,512),[[i.Jo,r.form.serviceName]])]),(0,o.Lk)("div",ce,[e[12]||(e[12]=(0,o.Lk)("label",{for:"active"},"Active?",-1)),(0,o.bo)((0,o.Lk)("input",{id:"active","onUpdate:modelValue":e[2]||(e[2]=t=>r.form.active=t),type:"checkbox"},null,512),[[i.lH,r.form.active]])]),(0,o.Lk)("div",le,[e[14]||(e[14]=(0,o.Lk)("label",{for:"category"},"Category",-1)),(0,o.bo)((0,o.Lk)("select",{id:"category","onUpdate:modelValue":e[3]||(e[3]=t=>r.form.category=t),required:""},[e[13]||(e[13]=(0,o.Lk)("option",{value:""},"Select a category",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.categories,((t,e)=>((0,o.uX)(),(0,o.CE)("option",{key:e,value:e},(0,q.v_)(t),9,ue)))),128))],512),[[i.u1,r.form.category]])]),(0,o.Lk)("div",de,[e[15]||(e[15]=(0,o.Lk)("label",{for:"cost"},"Cost",-1)),(0,o.bo)((0,o.Lk)("input",{id:"cost","onUpdate:modelValue":e[4]||(e[4]=t=>r.form.cost=t),type:"number",step:"0.01",required:""},null,512),[[i.Jo,r.form.cost,void 0,{number:!0}]])]),(0,o.Lk)("div",pe,[e[17]||(e[17]=(0,o.Lk)("label",{for:"billingCycle"},"Billing Cycle",-1)),(0,o.bo)((0,o.Lk)("select",{id:"billingCycle","onUpdate:modelValue":e[5]||(e[5]=t=>r.form.billingCycle=t),required:""},e[16]||(e[16]=[(0,o.Lk)("option",{value:"monthly"},"Monthly",-1),(0,o.Lk)("option",{value:"annual"},"Annual",-1)]),512),[[i.u1,r.form.billingCycle]])]),(0,o.Lk)("div",be,[e[18]||(e[18]=(0,o.Lk)("label",{for:"nextRenewal"},"Next Renewal Date",-1)),(0,o.bo)((0,o.Lk)("input",{id:"nextRenewal","onUpdate:modelValue":e[6]||(e[6]=t=>r.form.nextRenewal=t),type:"date",disabled:!r.form.active,required:""},null,8,he),[[i.Jo,r.form.nextRenewal]])]),(0,o.Lk)("div",ge,[e[19]||(e[19]=(0,o.Lk)("label",{for:"valueRating"},"Value Rating",-1)),(0,o.bo)((0,o.Lk)("input",{id:"valueRating","onUpdate:modelValue":e[7]||(e[7]=t=>r.form.valueRating=t),type:"number",min:"1",max:"5",required:""},null,512),[[i.Jo,r.form.valueRating,void 0,{number:!0}]])]),(0,o.Lk)("div",ve,[e[20]||(e[20]=(0,o.Lk)("label",{for:"notes"},"Notes",-1)),(0,o.bo)((0,o.Lk)("textarea",{id:"notes","onUpdate:modelValue":e[8]||(e[8]=t=>r.form.notes=t),rows:"3"},null,512),[[i.Jo,r.form.notes]])]),(0,o.Lk)("div",me,[(0,o.Lk)("button",{type:"button",onClick:e[9]||(e[9]=e=>t.$emit("cancel"))},"Cancel"),(0,o.Lk)("button",ye,(0,q.v_)(a.isEditing?"Update":"Add")+" Subscription ",1)])],32)])}const we={serviceName:"",category:"",cost:"",billingCycle:"monthly",nextRenewal:"",valueRating:3,notes:""};var ke={name:"SubscriptionForm",props:{subscription:{type:Object,default:null}},data(){return{categories:u,form:we}},computed:{isEditing(){return!!this.subscription}},methods:{handleSubmit(){this.$emit("subscription-submit",this.form)},resetForm(){this.form={...we}}},watch:{subscription:{immediate:!0,handler(t){t?(this.form={...t},this.form.active="active"===t.status,this.form.nextRenewal=new Date(t.nextRenewal).toISOString().split("T")[0]):this.resetForm()}}}};const Ce=(0,y.A)(ke,[["render",fe],["__scopeId","data-v-ff7c2838"]]);var Se=Ce,Le={name:"SubscriptionManager",components:{SubscriptionList:ne,SubscriptionForm:Se},data(){return{showForm:!1,editingSubscription:null}},methods:{handleAddSubscriptionClick(){this.showForm=!0,this.editingSubscription=null},async handleSubscriptionSubmit(t){try{const e=gt.buildFromFormData(t),s=St();e.subscriptionId?await s.updateSubscription(e):await s.addSubscription(e),this.$refs.subscriptionForm.resetForm(),D("Subscription saved successfully!")}catch(e){D("Sorry, there was an error while saving the subscription."),console.error(e)}this.showForm=!1,this.editingSubscription=null},handleEdit(t){const e=St();this.editingSubscription=e.getSubscriptionById(t),this.showForm=!0},handleCancel(){this.editingSubscription=null,this.showForm=!1}}};const Fe=(0,y.A)(Le,[["render",Dt],["__scopeId","data-v-48cd2388"]]);var Ee=Fe;const Re=[{path:"/",redirect:"/dashboard"},{path:"/login",name:"Login",component:$},{path:"/update-password",name:"UpdatePassword",component:X},{path:"/dashboard",name:"Dashboard",component:Rt,meta:{requiresAuth:!0}},{path:"/subscriptions",name:"Subscriptions",component:Ee,meta:{requiresAuth:!0}}],Ae=(0,C.aE)({history:(0,C.Bt)(),routes:Re});Ae.beforeEach(((t,e,s)=>{const i=t.matched.some((t=>t.meta.requiresAuth)),o=h();i&&!o?s({name:"Login"}):s()}));var De=Ae;const Pe=(0,i.Ef)(w),xe=(0,k.Ey)();Pe.use(xe),Pe.use(De),Pe.use(R.Ay,{autoClose:5e3}),Pe.mount("#app")},5682:function(){}},e={};function s(i){var o=e[i];if(void 0!==o)return o.exports;var n=e[i]={exports:{}};return t[i].call(n.exports,n,n.exports,s),n.exports}s.m=t,function(){var t=[];s.O=function(e,i,o,n){if(!i){var r=1/0;for(u=0;u<t.length;u++){i=t[u][0],o=t[u][1],n=t[u][2];for(var a=!0,c=0;c<i.length;c++)(!1&n||r>=n)&&Object.keys(s.O).every((function(t){return s.O[t](i[c])}))?i.splice(c--,1):(a=!1,n<r&&(r=n));if(a){t.splice(u--,1);var l=o();void 0!==l&&(e=l)}}return e}n=n||0;for(var u=t.length;u>0&&t[u-1][2]>n;u--)t[u]=t[u-1];t[u]=[i,o,n]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var i in e)s.o(e,i)&&!s.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={524:0};s.O.j=function(e){return 0===t[e]};var e=function(e,i){var o,n,r=i[0],a=i[1],c=i[2],l=0;if(r.some((function(e){return 0!==t[e]}))){for(o in a)s.o(a,o)&&(s.m[o]=a[o]);if(c)var u=c(s)}for(e&&e(i);l<r.length;l++)n=r[l],s.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return s.O(u)},i=self["webpackChunksub_pop"]=self["webpackChunksub_pop"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=s.O(void 0,[504],(function(){return s(800)}));i=s.O(i)})();
//# sourceMappingURL=app.2eae1f8a.js.map